(self.webpackJsonp=self.webpackJsonp||[]).push([["manifests/landers/short/free-trial","application"],{"./app/javascript/application.js":function(e,t,i){"use strict";i.r(t);var n=i("../caches/app/node_modules/@shopify/marketing-assets/dist/javascripts/index.js");window.App=window.App||{},window.ShopifyMarketing=window.ShopifyMarketing||{},App.config&&App.config.signupHost&&n.config.set("SignupBaseURI",`https://${App.config.signupHost}`),n.config.set("customGoogleAnalyticsNamespace","_other"),Object(n.init)();const o=document.getElementById("ShopifyMainNav");App.scrollTo=new n.ScrollTo({offset:o?-o.offsetHeight:0}),new n.StickyNav},"./app/javascript/manifests/landers/short/free-trial.js":function(e,t,i){"use strict";i.r(t);var n=i("../caches/app/node_modules/@shopify/marketing-assets/dist/javascripts/index.js");ShopifyMarketing.InterstitialModal=function(){const e=n.cookieHelper;function t(e,t){this.templateElement=e,this.options=t||{},this.trigger=[],this.body=document.body,this.activeClass="js-interstitial-modal-active";document.querySelector(".js-close-modal")&&document.body.addEventListener("click",(e=>{e.target.classList.contains("js-close-modal")&&this.close({fromCta:!0})})),n.Modal.call(this,this.trigger,this.template.bind(this),{clickingOverlayClosesModal:!1,...this.options})}return t.prototype=Object.create(n.Modal.prototype),t.prototype.open=function(...e){this.options.showOncePerSession&&this.clientHasViewedInterstitial()||(this.body.classList.add(this.activeClass),n.analytics.track("Free Trial","Interstitial","open"),n.Modal.prototype.open.apply(this,e))},t.prototype.close=function(e){const t=e||{};n.Modal.prototype.close.call(this,(()=>{this.body.classList.remove(this.activeClass),n.analytics.track("Free Trial","Interstitial","close")})),this.options.showOncePerSession&&t.fromCta&&this.setClientHasViewedCookie()},t.prototype.template=function(){const e=this.templateElement.cloneNode(!0);return e.removeAttribute("style"),e.removeAttribute("id"),e.outerHTML},t.prototype.clientHasViewedInterstitial=function(){return Boolean(e.get(this.options.cookie))},t.prototype.setClientHasViewedCookie=function(){e.set(this.options.cookie,1)},t}();i("./app/javascript/application.js");var o=i("./app/javascript/modules/storename-autogen-signup-modal.js"),s=i("./app/javascript/templates/signup-modal.ejs"),a=i.n(s),l=i("./app/javascript/modules/wistia-modal/index.js");!function(){var e;const t=document.getElementById("InterstitialModalTemplate");t&&new ShopifyMarketing.InterstitialModal(t).open();const i=document.querySelector(".js-wistia-modal");i&&new l.a(i);const s=window.location.href.match("www.shopify.com/free-trial$"),r=document.querySelectorAll(".free-trial__button, .free-trial-footer__button");r.length&&s&&new o.a(r,(()=>a()({signupHeader:n.i18n.t("signup.header")})),{modalActiveContainerClass:"signup-modal js-is-active",clickingOverlayClosesModal:!1});var d,c;"true"===(null===(e=document.getElementById("three_f_experiment"))||void 0===e?void 0:e.value)&&(null===(d=window)||void 0===d||null===(c=d.analytics)||void 0===c||c.ready((()=>{var e,t,i,s;const l=(new Verdict.Verdict).getVariant("threef_storename_autogen_intl",{subjectId:null===(e=window)||void 0===e||null===(t=e.analytics)||void 0===t||null===(i=t.trekkie)||void 0===i||null===(s=i.defaultAttributes)||void 0===s?void 0:s.uniqToken}),d="storename_autogenerate"===l;r.length&&d&&(window.signupFormExperiment="3f_storename_autogen_intl",window.signupFormExperimentGroup=l,new o.a(r,(()=>a()({signupHeader:n.i18n.t("signup.header")})),{modalActiveContainerClass:"signup-modal js-is-active",clickingOverlayClosesModal:!1}));const c=()=>{var e,t,i,n,o,s,a,r,d,c,u,p,m,_;null===(e=window)||void 0===e||null===(t=e.analytics)||void 0===t||t.track("monorail://experiments_dotcom_assign/3.0",{uniqToken:null===(i=window)||void 0===i||null===(n=i.analytics)||void 0===n||null===(o=n.trekkie)||void 0===o||null===(s=o.defaultAttributes)||void 0===s?void 0:s.uniqToken,visitToken:null===(a=window)||void 0===a||null===(r=a.analytics)||void 0===r||null===(d=r.trekkie)||void 0===d||null===(c=d.defaultAttributes)||void 0===c?void 0:c.visitToken,microSessionId:null===(u=window)||void 0===u||null===(p=u.analytics)||void 0===p||null===(m=p.trekkie)||void 0===m||null===(_=m.defaultAttributes)||void 0===_?void 0:_.microSessionId,page_url:window.location.href,source_app:"brochure2",experiment_handle:"3f_storename_autogen_intl",variation_name:l,experiment_start_at:"2021-09-15T00:00:00-05:00"})};document.querySelector(".js-signup-inline")&&!d&&document.querySelector(".js-signup-inline").addEventListener("submit",c),document.querySelector(".free-trial-footer__button")&&!d&&document.querySelector(".free-trial-footer__button").addEventListener("click",c)})));const u=document.getElementById("FaqAccordion");u&&new n.Accordion(u,{mobileOnly:!1,itemSelector:".accordion-item",openFirst:!1})}()},"./app/javascript/modules/storename-autogen-signup-modal.js":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("../caches/app/node_modules/@shopify/marketing-assets/dist/javascripts/index.js"),o=i("./app/javascript/templates/shopname-field.ejs"),s=i.n(o),a=i("./app/javascript/templates/shopname-help-modal.ejs"),l=i.n(a);class r{constructor(e,t,i){this.triggerEl=e,this.template=t,this.options={modalId:"helpmodal",modalClass:"helpmodal__container",modalContentClass:"helpmodal__content",appendToSelector:"body",content:{},...i},document.getElementsByClassName(this.options.modalClass)[0]||document.querySelector(this.options.appendToSelector).insertAdjacentHTML("beforebegin",t(this.options)),this.modalContainer=document.getElementsByClassName(this.options.modalClass)[0],this.modal=document.getElementsByClassName("helpmodal")[0],document.querySelector(".helpmodal__close").addEventListener("click",this.close.bind(this)),e.addEventListener("click",this.open.bind(this)),this.modalContainer.addEventListener("click",(e=>{e.target.matches(`.${this.options.modalClass}`)&&this.close(e)}))}open(e){e.preventDefault(),this.modalContainer.classList.add("active")}close(e){e.preventDefault(),this.modalContainer.classList.remove("active")}}class d extends n.SignupModal{constructor(e,t,i){super(e,t,i),this.selectedDomainEl=document.createElement("input"),this.selectedDomainEl.setAttribute("name","extra[selected_domain]"),this.selectedDomainEl.setAttribute("type","hidden"),this.timeout=null}render(){this.modalDom.$modal.innerHTML=this.template(),this.modalDom.$modal.querySelector(".signup-modal__content").appendChild(this.$signupForm.cloneNode(!0)),super.render();const e=document.querySelector(".shop_name input");e.addEventListener("input",this.onShopNameInput.bind(this)),e.classList.add("no-label")}open(e){super.open(e);const t=document.querySelector('form.js-signup-inline input[type="email"]').value||"",i=this.modalForm.fields.email;i.setState({value:t}),i.node.querySelector("input").value=t,document.querySelector("div.stateful-field.shop_name span.marketing-label--in-field")&&document.querySelector("div.stateful-field.shop_name span.marketing-label--in-field").remove();const n=t.replace(/\s+/g,"").toLowerCase().split("@")[0];if(this.addShopNameFieldSubtext(n),t||(document.querySelector(".shop_name").style.display="",document.querySelector(".subtext__url").style.display="none"),!document.querySelector(".shopurl")){const e=document.createElement("span");e.classList.add("shopurl"),e.innerText=".myshopify.com",document.querySelector(".shop_name label").appendChild(e)}if(!document.querySelector(".availability")){const e=document.createElement("span");e.classList.add("availability"),e.classList.add("hide"),e.innerText="Checking availability...",document.querySelector(".shop_name label").appendChild(e)}window.signupFormExperiment&&window.signupFormExperimentGroup&&window.analytics.track("monorail://experiments_dotcom_assign/3.0",{uniqToken:window.analytics.trekkie.defaultAttributes.uniqToken,visitToken:window.analytics.trekkie.defaultAttributes.visitToken,microSessionId:window.analytics.trekkie.defaultAttributes.microSessionId,page_url:window.location.href,source_app:"brochure2",experiment_handle:window.signupFormExperiment,variation_name:window.signupFormExperimentGroup,experiment_start_at:"2021-09-15T00:00:00-05:00"})}addShopNameFieldSubtext(e){const t=document.querySelector(".shop_name");t.style.display="none",t.insertAdjacentHTML("afterend",s()({editText:n.i18n.t("landers.short.free_trial.edit_button"),helpText:n.i18n.t("landers.short.free_trial.help_text",{query:e||"mystore"}),learnMore:n.i18n.t("landers.short.free_trial.learn_button"),button:!0})),new r(document.querySelector("button.link__learn"),l.a,{appendToSelector:".modal-container",content:n.i18n.t("landers.short.free_trial.help_modal")}),document.querySelector("button.link__learn").addEventListener("click",(()=>window.analytics.track("monorail://marketing_page_event/2.0",{user_token:window.analytics.trekkie.defaultAttributes.uniqToken,session_token:window.analytics.trekkie.defaultAttributes.visitToken,pageview_id:window.analytics.trekkie.defaultAttributes.microSessionId,page_url:window.location.href,canonical_url:document.querySelector("link[rel='canonical']").href,project:"brochure2",page_language:window.analytics.trekkie.defaultAttributes.locale,environment:"production",event_category:"3f-storename-autogen",event_action:"click-link",event_label:"learn-more-modal"}))),document.querySelector(".url-edit").addEventListener("click",this.onEditShopName),e&&this.generateShopName(e)}onEditShopName(e){e.preventDefault(),document.querySelector(".shop_name").style.display="",document.querySelector(".subtext__url").style.display="none",window.analytics.track("monorail://marketing_page_event/2.0",{user_token:window.analytics.trekkie.defaultAttributes.uniqToken,session_token:window.analytics.trekkie.defaultAttributes.visitToken,pageview_id:window.analytics.trekkie.defaultAttributes.microSessionId,page_url:window.location.href,canonical_url:document.querySelector("link[rel='canonical']").href,project:"brochure2",page_language:window.analytics.trekkie.defaultAttributes.locale,environment:"production",event_category:"3f-storename-autogen",event_action:"click-button",event_label:"edit-storename"})}onShopNameInput(e){this.timeout&&window.cancelAnimationFrame(this.timeout),this.timeout=window.requestAnimationFrame((()=>{document.querySelector(".shopurl").classList.remove("hide");const{value:t}=e.srcElement;t.length>4?(document.querySelector(".shopurl").style.left=0,document.querySelector(".shopurl").style["padding-left"]=`${t.length+1}ch`):document.querySelector(".shopurl").classList.add("hide"),window.I18n.data.forms.errors.shop_name.existingAdmin=n.i18n.t("landers.short.free_trial.existing_admin_error",{shop_name:t})}))}close(){super.close(),this.selectedDomainEl.remove(),document.querySelector(".shop_name").style.display="",document.querySelector("#SignupForm_modal > div.field__subtext").remove()}generateShopName(e){const t=this.modalForm.fields.shop_name,i=async e=>{const i=e.replace(/(shopify)/gi,"");return t.setState({value:i}),document.querySelector(".shop_name input").value=i,document.querySelector(".subtext__url .url__text").innerText=`${i}.myshopify.com`,await this.modalForm.validateField(t),t},n=async t=>{var o,s,a,l,r,d;if(null!=t&&null!==(o=t.state)&&void 0!==o&&o.error&&null!=t&&null!==(s=t.state)&&void 0!==s&&null!==(a=s.errors)&&void 0!==a&&a.existingAdmin){const t=await i((d=e,`${d}-${Math.floor(100+900*Math.random()).toString()}`));return n(t)}return(null==t||null===(l=t.state)||void 0===l?void 0:l.error)&!Object.keys(null==t||null===(r=t.state)||void 0===r?void 0:r.errors).includes("existingAdmin")?(document.querySelector(".shop_name").style.display="",document.querySelector(".subtext__url").style.display="none",t.state.value):t.state.value};return i(e).then(n)}getEncodedMonorailParams(e){return Object.entries(e).map((e=>e.map(encodeURIComponent).join("="))).join("&")}}},"./app/javascript/modules/wistia-modal/container.ejs":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="wistia-modal">\n  <div class="wistia-modal__spinner"></div>\n  <div class="wistia-modal__embed-container">'+(null==(__t=embed)?"":__t)+"</div>\n</div>\n";return __p}},"./app/javascript/modules/wistia-modal/embed.ejs":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="'+(null==(__t=instanceId)?"":__t)+'" class="wistia-modal__embed wistia_embed wistia_async_'+(null==(__t=wistiaId)?"":__t)+'">&nbsp;</div>\n';return __p}},"./app/javascript/modules/wistia-modal/hidden-container.ejs":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="visuallyhidden" aria-hidden="true">'+(null==(__t=embed)?"":__t)+"</div>\n";return __p}},"./app/javascript/modules/wistia-modal/index.js":function(e,t,i){"use strict";var n=i("../caches/app/node_modules/@shopify/marketing-assets/dist/javascripts/index.js"),o=i("./app/javascript/modules/wistia-modal/container.ejs"),s=i.n(o),a=i("./app/javascript/modules/wistia-modal/embed.ejs"),l=i.n(a),r=i("./app/javascript/modules/wistia-modal/hidden-container.ejs"),d=i.n(r);window._wq=window._wq||[];t.a=class{constructor(...e){const{$trigger:t,wistiaId:i,wistiaOptions:o}=this._resolveArgs(...e);Object.assign(this,{$trigger:t,wistiaId:i,wistiaOptions:o}),this._instanceId=Object(n.uniqueId)(),this._videoIsReadyToPlay=!1,this._loadWistiaHasRun=!1,this._parser=new DOMParser,this._$container=this._generateContainer(),["_modalTemplate","_loadWistia","_onVideoEmbedded","_onVideoPlayed","_onModalOpened"].forEach((e=>{this[e]=this[e].bind(this)})),window._wq.push(this._wistiaConfig),this._modal=this._initiateModal()}get _wistiaLoaded(){return this._loadWistiaHasRun||void 0!==window.Wistia}get _wistiaConfig(){return{id:this._instanceId,options:{autoPlay:!0,silentAutoPlay:!1,...this.wistiaOptions},onEmbedded:this._onVideoEmbedded}}_resolveArgs(e,t,i={}){const n={};if(!(e instanceof HTMLElement))throw new Error("WistiaModal wasn't passed an HTMLElement");if(n.$trigger=e,n.wistiaOptions=i,"object"==typeof t?n.wistiaOptions=t:"string"==typeof t&&(n.wistiaId=t),!n.wistiaId&&n.$trigger.dataset.wistiaId&&(n.wistiaId=n.$trigger.dataset.wistiaId),!n.wistiaId)throw new Error("WistiaModal couldn't resolve to a Wistia ID");return n}_initiateModal(){const e=new n.Modal(this.$trigger,this._modalTemplate,{modalStyleModifierClasses:{container:"modal-container--wistia modal-container--lowlight",closeIcon:"icon-modules-close-white"}});return e.on("opened",this._onModalOpened),e}_modalTemplate(){return this._$container}_generateContainer(){const e=l()({instanceId:this._instanceId,wistiaId:this.wistiaId}),t=s()({embed:e});return this._htmlStringToElement(t)}_generateHiddenContainer(){const e=l()({instanceId:`hidden_${this._instanceId}`,wistiaId:this.wistiaId}),t=d()({embed:e});return this._htmlStringToElement(t)}_htmlStringToElement(e){return this._parser.parseFromString(e,"text/html").body.firstChild}_onModalOpened(){this.video&&this.video.play(),this._wistiaLoaded||this._loadWistia()}_onVideoPlayed(){this._videoHasPlayed||(this._videoHasPlayed=!0,this._$container.classList.add("has-played"))}_onVideoEmbedded(e){this.video=e,this.video.bind("play",this._onVideoPlayed)}_loadWistia(){this._loadWistiaHasRun=!0,this._loadScript(`https://fast.wistia.com/embed/medias/${this.wistiaId}.jsonp`),this._loadScript("https://fast.wistia.com/assets/external/E-v1.js")}_loadScript(e){const t=document.createElement("script");t.type="text/javascript",document.body.appendChild(t),t.src=e}}},"./app/javascript/templates/shopname-field.ejs":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+="<div class='field__subtext'>\n    <div class='subtext__url'>\n        <span class='url__text'>.myshopify.com</span>\n        <span><button class='url-edit "+(null==(__t=button?"url-edit__button":"url-edit__link")?"":__t)+"'>"+(null==(__t=editText)?"":__t)+"</button></span>\n    </div>\n    <div class='subtext__help'>\n        "+(null==(__t=helpText)?"":__t)+'\n        <button class="link__learn">'+(null==(__t=learnMore)?"":__t)+"</button>\n    </div>\n</div>\n";return __p}},"./app/javascript/templates/shopname-help-modal.ejs":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){for(var i in __p+='<div id="'+(null==(__t=modalId)?"":__t)+'" class="helpmodal__container">\n    <div class="helpmodal">\n      <div class="helpmodal__header">\n        <h2>Your Store URL</h2>\n        <span class="helpmodal__close">&times;</span>\n      </div>\n      <div class="'+(null==(__t=modalContentClass||"helpmodal__content")?"":__t)+'">\n        ',Object.values(content))__p+='\n          <div class="content__section">\n            '+(null==(__t=Object.values(content)[i].question)?"":__t)+"\n            "+(null==(__t=Object.values(content)[i].answer)?"":__t)+"\n          </div>\n       ";__p+="\n      </div>\n    </div>\n\n</div>\n"}return __p}},"./app/javascript/templates/signup-modal.ejs":function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+="<div class='signup-modal__content'>\n    <h2 class='modal__heading' id='ModalTitle'>"+(null==(__t=signupHeader)?"":__t)+"</h2>\n</div>\n";return __p}}},[["./app/javascript/manifests/landers/short/free-trial.js","runtime","vendor"]]]);
//# sourceMappingURL=free-trial-c37ab69f5249a7cde8d9da078cdda1c93912d2e858dac7fbd2c5b5fd7ebb0cb0.js.map